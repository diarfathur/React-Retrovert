{"ast":null,"code":"import _regeneratorRuntime from \"/home/alphatech/Documents/02-Project_Portofolio/react-ecommerce/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/alphatech/Documents/02-Project_Portofolio/react-ecommerce/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/home/alphatech/Documents/02-Project_Portofolio/react-ecommerce/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport createStore from \"unistore\";\nimport axios from \"axios\";\nimport { playlistBerawan, playlistCerah, playlistHujan, Bearer } from \"./Data.js\";\nimport _ from 'lodash';\nvar initialState = {\n  cities: \"Malang\",\n  api_key: \"\",\n  email: \"\",\n  password: \"\",\n  full_name: \"\",\n  username: \"\",\n  avatar: \"\",\n  is_login: \"\",\n  listSong: [],\n  Cuaca: \"\",\n  Song: \"\",\n  SongTitle: \"\",\n  Images: \"\",\n  Time: \"\",\n  Artist: \"\",\n  Thrower: \"\",\n  moods: \"\",\n  MoodCityStat: 1,\n  NamaCuaca: 1,\n  dataSearch: [],\n  listRetro: []\n};\nexport var store = createStore(initialState);\nexport var actions = function actions(store) {\n  return {\n    setField: function setField(state, event) {\n      return _defineProperty({}, event.target.name, event.target.value);\n    },\n    postLogout: function postLogout(state) {\n      return {\n        is_login: false\n      };\n    },\n    ChangeValue: function ChangeValue(state, data, stats) {\n      if (stats == 1) {\n        return {\n          cities: data,\n          MoodCityStat: stats\n        };\n      }\n\n      if (stats == 2) {\n        return {\n          moods: data,\n          MoodCityStat: stats\n        };\n      }\n    },\n    postLogin: function () {\n      var _postLogin = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(state) {\n        var data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                data = {\n                  username: state.username,\n                  password: state.password\n                };\n                _context.next = 3;\n                return axios.post(\"https://api-todofancy.herokuapp.com/api/auth\", data).then(function (response) {\n                  if (response.data.status === \"oke\") {\n                    store.setState({\n                      is_login: true,\n                      avatar: response.data.user_data.avatar,\n                      email: response.data.user_data.email,\n                      username: response.data.user_data.username\n                    });\n                  }\n                }).catch(function (error) {\n                  console.log(error);\n                });\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function postLogin(_x) {\n        return _postLogin.apply(this, arguments);\n      }\n\n      return postLogin;\n    }(),\n    GetPublic: function () {\n      var _GetPublic = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(state) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return axios.get('http://127.0.0.1:5000/public').then(function (response) {\n                  store.setState({\n                    listRetro: response.data.products\n                  });\n                  console.log(\"thiiis\", response.data);\n                  console.log(this.state.listRetro);\n                }).catch(function (error) {\n                  console.log(error);\n                });\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function GetPublic(_x2) {\n        return _GetPublic.apply(this, arguments);\n      }\n\n      return GetPublic;\n    }(),\n    GetCuaca: function () {\n      var _GetCuaca = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(state) {\n        var playlist, _playlist3, _playlist4, _playlist5;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!(store.getState().MoodCityStat == 1)) {\n                  _context3.next = 5;\n                  break;\n                }\n\n                _context3.next = 3;\n                return axios.get(\"http://api.openweathermap.org/data/2.5/weather?q=\" + store.getState().cities + \"&appid=02436e399d179c2eb2871ed7d4169798\").then(function (response) {\n                  store.setState({\n                    Cuaca: response.data.weather['0'].id\n                  }); //dipakai juga untuk Focus, Chill, Accoustic, Classic\n\n                  if (store.getState().Cuaca > 800) {\n                    var playlist = playlistBerawan[Math.floor(Math.random() * playlistBerawan.length)];\n                    store.setState({\n                      Thrower: playlist\n                    });\n                    store.setState({\n                      NamaCuaca: \"Berawan\"\n                    });\n                  } else if (store.getState().Cuaca >= 700 && store.getState().Cuaca <= 800) {\n                    var _playlist = playlistCerah[Math.floor(Math.random() * playlistCerah.length)];\n                    store.setState({\n                      Thrower: _playlist\n                    });\n                    store.setState({\n                      NamaCuaca: \"Cerah\"\n                    });\n                  } else {\n                    var _playlist2 = playlistHujan[Math.floor(Math.random() * playlistHujan.length)];\n                    store.setState({\n                      Thrower: _playlist2\n                    });\n                    store.setState({\n                      NamaCuaca: \"Hujan\"\n                    });\n                  }\n\n                  axios.get(\"https://api.spotify.com/v1/playlists/\" + store.getState().Thrower, {\n                    headers: {\n                      \"Authorization\": \"Bearer \" + Bearer\n                    }\n                  }).then(function (response) {\n                    store.setState({\n                      listSong: response.data.tracks.items\n                    });\n                  }).catch(function (error) {\n                    console.log(error);\n                  });\n                }).catch(function (error) {\n                  console.log(error);\n                });\n\n              case 3:\n                _context3.next = 9;\n                break;\n\n              case 5:\n                if (!(store.getState().MoodCityStat == 2)) {\n                  _context3.next = 9;\n                  break;\n                }\n\n                if (store.getState().moods == \"Galau\" || store.getState().moods == \"Nostalgia\") {\n                  playlist = playlistHujan[Math.floor(Math.random() * playlistHujan.length)];\n                  store.setState({\n                    Thrower: playlist\n                  });\n                } else if (store.getState().moods == \"Sedih\") {\n                  _playlist3 = playlistHujan[Math.floor(Math.random() * playlistHujan.length)];\n                  store.setState({\n                    Thrower: _playlist3\n                  });\n                } else if (store.getState().moods == \"Senang\" || store.getState().moods == \"Semangat\" || store.getState().moods == \"Party\") {\n                  _playlist4 = playlistCerah[Math.floor(Math.random() * playlistCerah.length)];\n                  store.setState({\n                    Thrower: _playlist4\n                  });\n                } else if (store.getState().moods == \"Fokus\" || store.getState().moods == \"Love\") {\n                  _playlist5 = playlistBerawan[Math.floor(Math.random() * playlistBerawan.length)];\n                  store.setState({\n                    Thrower: _playlist5\n                  });\n                }\n\n                _context3.next = 9;\n                return axios.get(\"https://api.spotify.com/v1/playlists/\" + store.getState().Thrower, {\n                  headers: {\n                    \"Authorization\": \"Bearer \" + Bearer\n                  }\n                }).then(function (response) {\n                  store.setState({\n                    listSong: response.data.tracks.items\n                  });\n                }).catch(function (error) {\n                  console.log(error);\n                });\n\n              case 9:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function GetCuaca(_x3) {\n        return _GetCuaca.apply(this, arguments);\n      }\n\n      return GetCuaca;\n    }(),\n    searchNews: function () {\n      var _searchNews = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4(state, keyword) {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (keyword.length > 2) {\n                  try {\n                    {\n                      store.getState().listSong.map(function (item, key) {\n                        var counter = 0;\n\n                        if (_.includes(item.track.name.toLowerCase(), keyword.toLowerCase())) {\n                          store.getState().dataSearch.push(item);\n                        }\n                      });\n                    }\n                    store.setState({\n                      listSong: store.getState().dataSearch\n                    });\n                  } catch (error) {\n                    console.log(error);\n                  }\n                }\n\n                if (!(keyword.length <= 2)) {\n                  _context4.next = 13;\n                  break;\n                }\n\n                _context4.prev = 2;\n                _context4.next = 5;\n                return axios.get(\"https://api.spotify.com/v1/playlists/\" + store.getState().Thrower, {\n                  headers: {\n                    \"Authorization\": \"Bearer \" + Bearer\n                  }\n                });\n\n              case 5:\n                response = _context4.sent;\n                // console.log(store.getState().listSong);\n                store.setState({\n                  listSong: response.data.tracks.items\n                });\n                store.getState().dataSearch = [];\n                _context4.next = 13;\n                break;\n\n              case 10:\n                _context4.prev = 10;\n                _context4.t0 = _context4[\"catch\"](2);\n                console.log(_context4.t0);\n\n              case 13:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[2, 10]]);\n      }));\n\n      function searchNews(_x4, _x5) {\n        return _searchNews.apply(this, arguments);\n      }\n\n      return searchNews;\n    }()\n  };\n};","map":{"version":3,"sources":["/home/alphatech/Documents/02-Project_Portofolio/react-ecommerce/src/store.js"],"names":["createStore","axios","playlistBerawan","playlistCerah","playlistHujan","Bearer","_","initialState","cities","api_key","email","password","full_name","username","avatar","is_login","listSong","Cuaca","Song","SongTitle","Images","Time","Artist","Thrower","moods","MoodCityStat","NamaCuaca","dataSearch","listRetro","store","actions","setField","state","event","target","name","value","postLogout","ChangeValue","data","stats","postLogin","post","then","response","status","setState","user_data","catch","error","console","log","GetPublic","get","products","GetCuaca","getState","weather","id","playlist","Math","floor","random","length","headers","tracks","items","searchNews","keyword","map","item","key","counter","includes","track","toLowerCase","push"],"mappings":"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","sourcesContent":["import createStore from \"unistore\";\nimport axios from \"axios\";\nimport { playlistBerawan, playlistCerah, playlistHujan, Bearer } from \"./Data.js\"\nimport _ from 'lodash';\n\n\nconst initialState = {\n    cities: \"Malang\",\n    api_key: \"\",\n    email: \"\",\n    password: \"\",\n    full_name: \"\",\n    username: \"\",\n    avatar: \"\",\n    is_login: \"\",\n    listSong: [],\n    Cuaca: \"\",\n    Song: \"\",\n    SongTitle: \"\",\n    Images: \"\",\n    Time: \"\",\n    Artist:\"\",\n    Thrower: \"\",\n    moods: \"\",\n    MoodCityStat: 1,\n    NamaCuaca: 1,\n    dataSearch: [],\n\n    listRetro:[]\n}\n\n\nexport const store = createStore(initialState)\n\nexport const actions = store => ({\n    setField: (state, event) => {\n        return { [event.target.name]: event.target.value };\n    },\n    postLogout: state => {\n        return { is_login: false };\n    },\n    ChangeValue: (state, data, stats) => {\n        if (stats == 1) {\n            return { cities: data, MoodCityStat: stats };\n        }\n        if (stats == 2) {\n            return { moods: data, MoodCityStat: stats };\n        }\n    },\n    postLogin: async state => {\n        const data = {\n            username: state.username,\n            password: state.password,\n        };\n        await axios\n            .post(\"https://api-todofancy.herokuapp.com/api/auth\", data)\n            .then(function (response) {\n                if (response.data.status === \"oke\") {\n                    store.setState({\n                        is_login: true,\n                        avatar: response.data.user_data.avatar,\n                        email: response.data.user_data.email,\n                        username: response.data.user_data.username,\n                    })\n                }\n            })\n            .catch(function (error) {\n                console.log(error);\n            });\n    },\n\n    GetPublic: async (state) => {\n        await axios\n            .get('http://127.0.0.1:5000/public')\n            .then(function (response) {\n                store.setState({listRetro: response.data.products})\n                console.log(\"thiiis\",response.data);\n                console.log(this.state.listRetro);\n           })\n            .catch(function(error){\n                console.log(error);\n            });\n    },\n\n    GetCuaca: async (state) => {\n        if (store.getState().MoodCityStat == 1) {\n            await axios\n                .get(\"http://api.openweathermap.org/data/2.5/weather?q=\" + store.getState().cities + \"&appid=02436e399d179c2eb2871ed7d4169798\")\n                .then(function (response) {\n                    store.setState({ Cuaca: response.data.weather['0'].id });\n\n                    //dipakai juga untuk Focus, Chill, Accoustic, Classic\n                    if (store.getState().Cuaca > 800) {\n                        const playlist = playlistBerawan[Math.floor(Math.random() * playlistBerawan.length)];\n                        store.setState({ Thrower: playlist });\n                        store.setState({ NamaCuaca: \"Berawan\" });\n\n                    } else if (store.getState().Cuaca >= 700 && store.getState().Cuaca <= 800) {\n                        const playlist = playlistCerah[Math.floor(Math.random() * playlistCerah.length)];\n                        store.setState({ Thrower: playlist });\n                        store.setState({ NamaCuaca: \"Cerah\" });\n\n                    } else {\n                        const playlist = playlistHujan[Math.floor(Math.random() * playlistHujan.length)];\n                        store.setState({ Thrower: playlist });\n                        store.setState({ NamaCuaca: \"Hujan\" });\n\n                    }\n                    axios\n                        .get(\"https://api.spotify.com/v1/playlists/\" + store.getState().Thrower,\n                            {\n                                headers: {\n                                    \"Authorization\": \"Bearer \" + Bearer,\n                                }\n                            })\n                        .then(function (response) {\n                            store.setState({ listSong: response.data.tracks.items });\n\n                        })\n                        .catch(function (error) {\n                            console.log(error);\n                        });\n                })\n                .catch(function (error) {\n                    console.log(error);\n                });\n        }\n        else if (store.getState().MoodCityStat == 2) {\n            if (store.getState().moods == \"Galau\" || store.getState().moods == \"Nostalgia\") {\n                const playlist = playlistHujan[Math.floor(Math.random() * playlistHujan.length)];\n                store.setState({ Thrower: playlist });\n            }\n            else if (store.getState().moods == \"Sedih\") {\n                const playlist = playlistHujan[Math.floor(Math.random() * playlistHujan.length)];\n                store.setState({ Thrower: playlist });\n            }\n            else if (store.getState().moods == \"Senang\" || store.getState().moods == \"Semangat\" || store.getState().moods == \"Party\") {\n                const playlist = playlistCerah[Math.floor(Math.random() * playlistCerah.length)];\n                store.setState({ Thrower: playlist });\n            }\n            else if (store.getState().moods == \"Fokus\" || store.getState().moods == \"Love\") {\n                const playlist = playlistBerawan[Math.floor(Math.random() * playlistBerawan.length)];\n                store.setState({ Thrower: playlist });\n            }\n\n            await axios\n                .get(\"https://api.spotify.com/v1/playlists/\" + store.getState().Thrower,\n                    {\n                        headers: {\n                            \"Authorization\": \"Bearer \" + Bearer,\n                        }\n                    })\n                .then(function (response) {\n                    store.setState({ listSong: response.data.tracks.items });\n\n                })\n                .catch(function (error) {\n                    console.log(error);\n                });\n        }\n    },\n    searchNews: async (state, keyword) => {\n        if (keyword.length > 2) {\n            try {\n                {\n                    store.getState().listSong.map((item, key) => {\n                        var counter = 0;\n                        if (_.includes(item.track.name.toLowerCase(), keyword.toLowerCase())) {\n                            store.getState().dataSearch.push(item)\n                        }\n                    })\n                }\n\n                store.setState({ listSong: store.getState().dataSearch });\n            }\n            catch (error) {\n                console.log(error);\n            }\n        }\n        if (keyword.length <= 2) {\n            try {\n                const response = await axios.get(\n                    \"https://api.spotify.com/v1/playlists/\" + store.getState().Thrower,\n                    {\n                        headers: {\n                            \"Authorization\": \"Bearer \" + Bearer,\n                        }\n                    })\n                // console.log(store.getState().listSong);\n                store.setState({ listSong: response.data.tracks.items });\n                store.getState().dataSearch = []\n            }\n            catch (error) {\n                console.log(error);\n            }\n        }\n    },\n})"]},"metadata":{},"sourceType":"module"}